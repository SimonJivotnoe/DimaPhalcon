<script id="metallHistoryOption" type="x-tmpl-mustache">
    {{#metallHistory}}
        <option data-price="{{ price }}" data-outprice="{{ outPrice }}">{{ price }}-{{ outPrice }}-{{ date }}</option>
    {{/metallHistory}}
</script>
<script id="categoriesTableTemplate" type="x-tmpl-mustache">
    {{#template}}
        <tr data-id="{{id}}">
            <td data-name-noty="{{name}}" class="nameForNoty">{{name}}</td>
            <td>{{article}}</td>
        </tr>
    {{/template}}
</script>
<script id="kimTableTemplate" type="x-tmpl-mustache">
    {{#template}}
        <tr data-id="{{id}}">
            <td data-name-noty="{{name}}" class="nameForNoty">{{name}}</td>
            <td>{{value}}</td>
            <td>{{description}}</td>
        </tr>
    {{/template}}
</script>
<script id="metallsTableTemplate" type="x-tmpl-mustache">
    {{#template}}
        <tr data-id="{{id}}">
            <td data-name-noty="{{name}}" class="nameForNoty">{{name}}</td>
            <td>{{price}}</td>
            <td>{{mass}}</td>
            <td>{{out_price}}</td>
            <td>{{article}}</td>
        </tr>
    {{/template}}
</script>
<script id="optionListTemplate" type="x-tmpl-mustache">
    {{#template}}
        <option data-id="{{id}}" data-article="{{article}}">{{name}}</option>
    {{/template}}
</script>
<script id="kimListTemplate" type="x-tmpl-mustache">
    {{#template}}
        <option data-id="{{id}}" data-val="{{value}}">{{name}} | {{value}}</option>
    {{/template}}
</script>
<script id="metallListTemplate" type="x-tmpl-mustache">
    {{#template}}
        <option data-id="{{id}}" data-price="{{price}}" data-article="{{article}}" data-outprice="{{out_price}}">{{name}} | {{price}} | {{out_price}}</option>
    {{/template}}
</script>
<script id="productTableRowTemplate" type="x-tmpl-mustache">
    <li class="">
        <span class="rowNumber col-md-2" data-element="{{rowNumber}}">{{rowNumber}}</span>
        <span class="rowName">
            <input class="rowNameInput" type="text" value="{{rowNameInput}}">
        </span>
        <span class="rowValue">
            <input class="rowValueInput" data-cell="{{rowNumber}}" data-formula="" data-format="0[.]00"
                   type="tel" style="width: 5em;" value="{{rowValueInput}}">
        </span>
        <label><input class="checkToArticle" type="checkbox"></label>
        <span class="removeRow glyphicon glyphicon-remove" aria-hidden="true"></span></li>
    </li>
</script>
<script id="formulaTemplate" type="x-tmpl-mustache">
    <tr class="formula">
        <td>
            <span class="checkbox checkbox-slider--b-flat checkbox-slider-success">
                <label>
                    <input type="checkbox" class="applyFormula" data-formula="{{formula}}"><span>&nbsp;</span>
                </label>
            </span>
        </td>
        <td class="formulaValue">{{{beautyFormula}}}</td>
        <td>
            <span class="glyphicon glyphicon-pencil editFormula" aria-hidden="true" data-formula="{{formula}}"></span>
        </td>
        <td>
            <span class="glyphicon glyphicon-remove removeFormula" aria-hidden="true"></span>
        </td>
    </tr>
</script>
<script id="formulaInCompletedProductTemplate" type="x-tmpl-mustache">
    <tr class="formula">
        <td>
            <span class="checkbox checkbox-slider--b-flat checkbox-slider-success">
                <label>
                    <input type="checkbox" class="applyFormula" data-formula="{{formula}}"><span>&nbsp;</span>
                </label>
            </span>
        </td>
        <td class="formulaValue">{{{beautyFormula}}}</td>
    </tr>
</script>
<script id="justCreatedFormula" type="x-tmpl-mustache">
    <span class="justCreated">
        <button type="button" class="btn custom-addRowsToTable btn-xs fhBtn">{{formula}}
            <span class="glyphicon glyphicon-remove removeFhBtn" data-id="{{id}}" aria-hidden="true"></span>
        </button>
    </span>
</script>
<script id="leftTabsTemplate" type="x-tmpl-mustache">
    {{#data}}
        <li role="presentation" class="{{isActiveTab}}" data-tab-id="{{tabId}}">
            <a href="#productTab{{tabId}}" aria-controls="productTab{{tabId}}" name="{{productId}}" role="tab" data-toggle="tab"
               aria-expanded="true">
                <span class="tabName">{{productName}}</span>
                <span class="closeTab glyphicon glyphicon-remove" data-tab-id="{{tabId}}" aria-hidden="true"></span>
            </a>
        </li>
    {{/data}}
</script>
<script id="formulasHelperTemplate" type="x-tmpl-mustache">
    {{#formulasHelper}}
        <span>
            <button type="button" class="btn custom-addRowsToTable btn-xs fhBtn" data-element="{{name}}">{{name}}
            <span class="glyphicon glyphicon-remove removeFhBtn" data-id="{{id}}" aria-hidden="true"></span>
            </button>
        </span>
    {{/formulasHelper}}
</script>
<script id="tabsContentTemplate" type="x-tmpl-mustache">
    {{#data}}
        <div role="tabpanel" class="tab-pane {{isActiveTab}}" id="productTab{{tabId}}">
            <div class="col-md-12 created">
                <div class="col-md-5">
                    <div class="productPicture">
                        <img src="img/{{productImage}}" style="max-width: 100%; max-height: 200px;">
                    </div>
                </div>
                <div class="col-md-4">Создано: {{productCreated}}</div>
                <div class="col-md-1 col-md-offset-2 createTableDiv copyProduct hvr-pulse-grow" data-product-id="{{productId}}">
                    <span class="glyphicon glyphicon-copy" aria-hidden="true"></span>
                </div>
            </div>
            <div class="col-md-10 col-md-offset-0">
                <table class="table table-bordered">
                    <tr>
                        <th>Артикул</th>
                        <th>Наименование продукта</th>
                        <th>Категория</th>
                        <th>КИМ</th>
                        <th>Металл</th>
                    </tr>
                    <tr>
                        <td>{{productArticle}}</td>
                        <td>{{productName}}</td>
                        <td>{{productCategory}}</td>
                        <td>{{productKim}}</td>
                        <td>{{productMetall}}</td>
                    </tr>
                </table>
            </div>
            <div class="col-md-10">
                <table class="table table-bordered">
                    {{#tableContent}}
                        <tr>
                            <td>{{rowNumber}}</td>
                            <td>{{rowNameInput}}</td>
                            <td>{{rowValueInput}}</td>
                        </tr>
                    {{/tableContent}}
                    {{#alwaysInTable}}
                        <tr class="alwaysInTable">
                            <td>{{rowNumber}}</td>
                            <td>{{rowNameInput}}</td>
                            <td>{{rowValueInput}}</td>
                        </tr>
                    {{/alwaysInTable}}
                </table>
            </div>
            <div class="clearer"></div>
        </div>
    {{/data}}
</script>

<script id="completedProductTemplate" type="x-tmpl-mustache">
    {{#productModel}}
        <div role="tabpanel" class="tab-pane {{isActiveTab}}" id="productTab{{tabId}}">
            <div class="col-md-12 created">
                <div class="col-md-5">
                    <div class="productPicture">
                        <img src="img/{{productImage}}" style="max-width: 100%; max-height: 200px;">
                    </div>
                </div>
                <div class="col-md-5">Создано: {{productCreated}}</div>
                <div class="col-md-2"><button type="button" class="btn btn-success btn-sm" data-product-id="{{productId}}" id="addToOrder">Добавить в Ордер</button></div>
            </div>
            <div class="col-md-10 col-md-offset-0">
                <table class="table table-bordered">
                    <tr>
                        <th>Артикул</th>
                        <th>Наименование продукта</th>
                        <th>Категория</th>
                        <th>КИМ</th>
                        <th>Металл</th>
                        <th>История Цен</th>
                    </tr>
                    <tr>
                        <td>{{productArticle}}</td>
                        <td>{{productName}}</td>
                        <td>{{productCategory}}</td>
                        <td>{{productKim}}</td>
                        <td>{{productMetall}}</td>
                        <td>{{{metallHistory}}}</td>
                    </tr>
                </table>
            </div>
            <div class="col-md-10">
                <table class="table table-bordered">
                    {{#tableContent}}
                        <tr>
                            <td>{{rowNumber}}</td>
                            <td>{{rowNameInput}}</td>
                            <td>{{rowValueInput}}</td>
                        </tr>
                    {{/tableContent}}
                    {{#alwaysInTable}}
                        <tr class="alwaysInTable">
                            <td>{{rowNumber}}</td>
                            <td>{{rowNameInput}}</td>
                            <td data-cell="{{rowNumber}}">{{rowValueInput}}</td>
                        </tr>
                    {{/alwaysInTable}}
                </table>
            </div>
            <div class="col-md-12">
                <table class="table table-hover" id="formulasList">
                    <tbody></tbody>
                </table>
            </div>
            <div style="display:none;">
                <div class="col-md-8 tableContent" >
                    <div class="col-md-10 productTableWrapper">
                        <form id="hiddenCompletedProductTable">
                            <div class="col-md-12">
                                <ul id="sortable">
                                    {{#tableContent}}
                                    <li class="">
                                        <span class="rowNumber col-md-2" data-element="{{rowNumber}}">{{rowNumber}}</span>
                                        <span class="rowName">
                                            <input class="rowNameInput" type="text" value="{{rowNameInput}}">
                                        </span>
                                        <span class="rowValue">
                                            <input class="rowValueInput" data-cell="{{rowNumber}}" data-formula="" data-format="0[.]00"
                                                   type="tel" style="width: 5em;" value="{{rowValueInput}}">
                                        </span>
                                    </li>
                                    {{/tableContent}}
                                </ul>
                            </div>
                            <div class="col-md-12">
                                <ul id="alwaysInTable">
                                    {{#alwaysInTable}}
                                    <li class="">
                                        <span class="rowNumber col-md-2" data-element="{{rowNumber}}">{{rowNumber}}</span>
                                        <span class="rowName">
                                            <input class="rowNameInput" type="text" value="{{rowNameInput}}">
                                        </span>
                                        <span class="rowValue">
                                            <input class="rowValueInput" data-cell="{{rowNumber}}" data-formula="{{dataFormula}}" data-format="0[.]00"
                                                   type="tel" style="width: 5em;" value="{{rowValueInput}}">
                                        </span>
                                    </li>
                                    {{/alwaysInTable}}
                                </ul>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="clearer"></div>
        </div>
    {{/productModel}}
</script>

<script id="orderDetailsTemplate" type="x-tmpl-mustache">
{{#orderDescription}}    
    <div class="row">
        <div class="col-md-12">
            <div class="col-md-6">
                <button id="orderDetailsButton" class="btn btn-primary btn-sm" type="button" data-toggle="collapse"
                 data-target="#orderDetailsCollapse" aria-expanded="false" aria-controls="orderDetailsCollapse">
                    Детали заказа
                </button>
            </div>
            <div class="col-md-6">
                <span>
                    <button type="button" class="btn btn-danger btn-sm" id="createPDF" data-order-article="{{orderName}}">
                        <span class="glyphicon glyphicon-print" aria-hidden="true"></span>  PDF
                    </button>
                </span>
                {{#deleteOrder}}
                    <button type="button" class="btn btn-danger btn-sm" id="deleteOrder">Удалить Ордер</button>
                {{/deleteOrder}}        
            </div>
        </div>
    </div>

    <div class="collapse" id="orderDetailsCollapse">
        <p>Дисконт: <input id="changeDiscount" class="inputWithoutBorders" type="number" value="{{discount}}"/>%</p>
        <div class="row">
            <div class="col-md-7 col-md-offset-5">
                <button class="btn btn-default btn-sm" id="checkAllInOrder">
                    <span class="glyphicon glyphicon-check" aria-hidden="true"></span>
                </button>
                <button class="btn btn-default btn-sm" id="uncheckAllInOrder">
                    <span class="glyphicon glyphicon-unchecked" aria-hidden="true"></span>
                </button>
            </div>
        </div>
        <div class="col-md-12" id="orderDetails">
            <table class="table table-striped table-bordered" id="orderDetailsTable">
                <tr>
                    <td><input type="checkbox" name="FIO" data-name="Вниманию(Ф.И.О.):"/></td>
                    <th>Вниманию(Ф.И.О.):</th>
                    <td>{{fio}}</td>
                    <td><input type="checkbox" name="APPEAL" data-name="Обращение:"/></td>
                    <th>Обращение:</th>
                    <td>{{appeal}}</td>
                </tr>
                <tr>
                    <td><input type="checkbox" name="COMPANY_NAME" data-name="Название компании:"/></td>
                    <th>Название компании:</th>
                    <td>{{companyName}}</td>
                    <td><input type="checkbox" name="ADDRES" data-name="Почтовый адрес:"/></td>
                    <th>Почтовый адрес:</th>
                    <td>{{addres}}</td>
                </tr>
                <tr>
                    <td><input type="checkbox" name="ACC_NUMBER" data-name="Номер счета:"/></td>
                    <th>Номер счета:</th>
                    <td>{{accNumber}}</td>
                    <td><input type="checkbox" name="CITY" data-name="Город, почтовый индекс:"/></td>
                    <th>Город, почтовый индекс:</th>
                    <td>{{city}}</td>
                </tr>
                <tr>
                    <td><input type="checkbox" name="PROJECT_NAME" data-name="Название проэкта:"/></td>
                    <th>Название проэкта:</th>
                    <td>{{projectName}}</td>
                    <td><input type="checkbox" name="PROJECT_DESCR" data-name="Описание проэкта:"/></td>
                    <th>Описание проэкта:</th>
                    <td>{{projectDescr}}</td>
                </tr>
                <tr>
                    <td><input type="checkbox" name="ESTIMATE" data-name="Срок:"/></td>
                    <th>Срок:</th>
                    <td>{{estimate}}</td>
                    <td><input type="checkbox" name="DATE" data-name="Дата:"/></td>
                    <th>Дата:</th>
                    <td>{{date}}</td>
                </tr>
            </table>
        </div>
    </div>
    <div class="col-md-12" id="consOrderButtonsWrapper">
        <div class="col-md-4 col-md-offset-3">
            <div class="col-md-6">
                <button type="button" class="btn btn-danger btn-sm" id="consRemoveSections">Убрать разделы</button>
            </div>
            <div class="col-md-6">
                <button type="button" class="btn btn-success btn-sm" id="consAveragePrices">Уникальные цены</button>
            </div>
        </div>
    </div>
    <div class="col-md-12 navbar navbar-default" id="orderCurrenciesWrapper">
        <div class="col-md-8 col-md-offset-4">
            <button type="button" class="btn btn-warning btn-sm activeCurrency" data-currency="грн" data-area="uahSet" id="orderCurrencyUAHToggle">UAH</button>
            <input data-set="uahSet" type="number" value="1.00" step="0.1" style="display: none;">
            <button type="button" class="btn btn-success btn-sm" autofocus="true" data-currency="USD" data-area="usdSet" id="orderCurrencyUSDToggle">
                <span class="glyphicon glyphicon-usd" aria-hidden="true"></span>
            </button>
            <input data-set="usdSet" type="number" value="24.00" step="0.1" style="width: 56px;">
            <button type="button" class="btn btn-info btn-sm" autofocus="true" data-currency="EUR" data-area="eurSet" id="orderCurrencyEURToggle">
                <span class="glyphicon glyphicon-eur" aria-hidden="true"></span>
            </button>
            <input data-set="eurSet" type="number" value="27.00" step="0.1" style="width: 56px;">
            <button type="button" class="btn btn-warning btn-sm" autofocus="true" data-currency="руб" data-area="rubSet" id="orderCurrencyRUBToggle">
                <span class="glyphicon glyphicon-rub" aria-hidden="true"></span>
            </button>
            <input data-set="rubSet" type="number" value="0.4" step="0.1" style="width: 56px;">
        </div>
    </div>
{{/orderDescription}} 
</script>